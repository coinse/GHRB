{
  "issue_id": 1837,
  "issue_url": "https://github.com/jhy/jsoup/issues/1837",
  "title": "Bug: DOM elements not being placed in (X)HTML namespace.",
  "description_text": "The [description page](https://jsoup.org/) for jsoup says:\r\n\r\n> jsoup implements the [WHATWG HTML5](https://whatwg.org/html) specification, and parses HTML to the same DOM as modern browsers do.\r\n\r\nThe [WHATWG HTML5 Specification \u00a7 2.1.3 XML compatibility](https://html.spec.whatwg.org/multipage/infrastructure.html#xml) says:\r\n\r\n> To ease migration from HTML to XML, user agents conforming to this specification will place elements in HTML in the [http://www.w3.org/1999/xhtml](https://infra.spec.whatwg.org/#html-namespace) namespace, at least for the purposes of the DOM and CSS.\r\n\r\nIn other words, jsoup should be placing HTML elements in the `http://www.w3.org/1999/xhtml` namespace, even in the absence of an `xmlns` declaration. But it's not.\r\n\r\nI'm using `org.jsoup:jsoup:1.15.3` with Java 17. I have a test HTML document that looks something like this:\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n  <meta charset=\"utf-8\">\r\n  <title>Foobar</title\r\n</head>\r\n<body>\r\n  \u2026\r\n</body>\r\n```\r\n\r\nIn a JUnit 5/Hamcrest unit test I read that document:\r\n\r\n```java\r\nURL testResourceUrl = getClass().getResource(\"foobar.html\");\r\ntry (InputStream inputStream = testResourceUrl.openStream()) {\r\n  org.jsoup.nodes.Document jsoupDocument = Jsoup.parse(inputStream, null, testResourceUrl.toString());\r\n  org.w3c.dom.Document domDocument = new W3CDom().fromJsoup(jsoupDocument);\r\n  assertThat(domDocument.getDocumentElement().getNamespaceURI(), is(\"http://www.w3.org/1999/xhtml\"));\r\n}\r\n```\r\n\r\nUnfortunately this test fails:\r\n\r\n```\r\njava.lang.AssertionError: \r\nExpected: is \"http://www.w3.org/1999/xhtml\"\r\n     but: was null\r\n\u2026\r\n```\r\n\r\nThus jsoup has a bug: it is not following the HTML5 specification and placing HTML elements in the `http://www.w3.org/1999/xhtml` namespace, but instead assigning them the `null` namespace.\r\n\r\nTo reiterate, yes, I realize that the HTML document in question has no default namespace specified. But as an HTML document it isn't required or even expected to. The HTML5 specification says that the HTML elements should be placed in the `http://www.w3.org/1999/xhtml` regardless."
}