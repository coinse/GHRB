{
  "issue_id": 7345,
  "issue_url": "https://github.com/apache/rocketmq/issues/7345",
  "title": "[Bug] wrong result of searchOffset in tiered storage",
  "description_text": "### Before Creating the Bug Report\r\n\r\n- [X] I found a bug, not just asking a question, which should be created in [GitHub Discussions](https://github.com/apache/rocketmq/discussions).\r\n\r\n- [X] I have searched the [GitHub Issues](https://github.com/apache/rocketmq/issues) and [GitHub Discussions](https://github.com/apache/rocketmq/discussions)  of this repository and believe that this is not a duplicate.\r\n\r\n- [X] I have confirmed that this bug belongs to the current repository, not other repositories of RocketMQ.\r\n\r\n\r\n### Runtime platform environment\r\n\r\nUbuntu\r\n\r\n### RocketMQ version\r\n\r\n5.1.0\r\n\r\n### JDK Version\r\n\r\n1.8.0\r\n\r\n### Describe the Bug\r\n\r\nThere are 3 segments in fileSegmentList, TieredFlatFile.getFileByTime(timestamp=0, boundaryType=LOWER) should return the first segment, but now returns the last segment.\r\n\r\n![image](https://github.com/apache/rocketmq/assets/14816818/61133d1e-27b2-4f04-a781-a17f91d7c939)\r\n\r\n\r\n### Steps to Reproduce\r\n\r\n1. start broker with tiered storage\r\n2. send some messages.\r\n3. use consumer.searchOffset to search offset with parameter timestamp=0, boundaryType=LOWER\r\n\r\n### What Did You Expect to See?\r\n\r\nsearchOffset  should return min offset.\r\n\r\n\r\n### What Did You See Instead?\r\n\r\nsearchOffset not returns min offset.\r\n\r\n\r\n### Additional Context\r\n\r\n_No response_"
}