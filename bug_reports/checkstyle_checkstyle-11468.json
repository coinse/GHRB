{
  "issue_id": 11365,
  "issue_url": "https://github.com/checkstyle/checkstyle/issues/11365",
  "title": "FinalClassCheck: False positive with anonymous classes",
  "description_text": "I have read check documentation: https://checkstyle.sourceforge.io/config_design.html#FinalClass\r\nI have downloaded the latest checkstyle from: https://checkstyle.org/cmdline.html#Download_and_Run\r\nI have executed the cli and showed it below, as cli describes the problem better than 1,000 words\r\n\r\n```bash\r\n/var/tmp $ javac Test.java\r\n\r\n/var/tmp $ cat config.xml\r\n```\r\n```xml\r\n<?xml version=\"1.0\"?>\r\n<!DOCTYPE module PUBLIC\r\n        \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\r\n        \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\r\n<module name=\"Checker\">\r\n    <module name=\"TreeWalker\">\r\n        <module name=\"FinalClass\"/>\r\n    </module>\r\n</module>\r\n```\r\n```\r\n/var/tmp $ cat Test.java\r\n```\r\n```java\r\npublic class Test {\r\n\r\n    class a { // expected no violation\r\n        private a() {\r\n        }\r\n    }\r\n\r\n    a obj = new a() {\r\n    };\r\n}\r\n```\r\n```bash\r\n/var/tmp $ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\r\n/var/tmp $ java $RUN_LOCALE -jar checkstyle-10.0-all.jar -c config.xml Test.java\r\nStarting audit...\r\n[ERROR] /var/tmp/Test.java:3:5: Class a should be declared as final. [FinalClass]\r\nAudit done.\r\nCheckstyle ends with 1 errors.\r\n```\r\n---\r\n\r\n**Describe what you expect in detail.**\r\n```bash\r\n/var/tmp $ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\r\n/var/tmp $ java $RUN_LOCALE -jar checkstyle-10.0-all.jar -c config.xml Test.java\r\nStarting audit...\r\nAudit done.\r\n```\r\nThis was supposed to be fixed in #9357. Making the class final results in a compile-time error.\r\n"
}