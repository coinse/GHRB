{
  "issue_id": 7026,
  "issue_url": "https://github.com/apache/rocketmq/issues/7026",
  "title": "[Bug] The proxy in the cluster mode returns null adress when master is down",
  "description_text": "### Before Creating the Bug Report\r\n\r\n- [X] I found a bug, not just asking a question, which should be created in [GitHub Discussions](https://github.com/apache/rocketmq/discussions).\r\n\r\n- [X] I have searched the [GitHub Issues](https://github.com/apache/rocketmq/issues) and [GitHub Discussions](https://github.com/apache/rocketmq/discussions)  of this repository and believe that this is not a duplicate.\r\n\r\n- [X] I have confirmed that this bug belongs to the current repository, not other repositories of RocketMQ.\r\n\r\n\r\n### Runtime platform environment\r\n\r\nOS: CentOS 6.9\r\n\r\n### RocketMQ version\r\n\r\nbranch: (develop|tag 5.1.3) version: 5.1.3\r\n\r\n### JDK Version\r\n\r\nJDK: 1.8.0_202\r\n\r\n### Describe the Bug\r\n\r\nWhen I connect to the clustered proxy to consume messages using the remoting protocol, the master broker happened to hang up. At this time, the address returned by the proxy was empty, which caused the request to be sent to the NameServer. The consumer's log screenshot is as follows:\r\n![image](https://github.com/apache/rocketmq/assets/10137071/a43503a9-2992-406f-a598-97f1fe79dceb)\r\n\r\nThe proxy code debug screenshot is as follows:\r\n![image](https://github.com/apache/rocketmq/assets/10137071/9a85f11d-fbe6-43b8-9e6b-e7b0522c6ae6)\r\n\r\n\r\n### Steps to Reproduce\r\n\r\n1. Deploy tow group of brokers, such as: \r\n   1. master: broker-a\uff0cslave: broker-a-s\r\n   2. master: broker-b\uff0cslave: broker-b-s\r\n2. Deploy a proxy\r\n3. Create some topics in broker-a for testing, such as message produing and consuming, that is not important.\r\n4. **Kill master broker-a**\u3002\r\n\r\n### What Did You Expect to See?\r\n\r\nProxy should return slave address\uff0cfor consumer can continue consume message from slave.\r\n\r\n### What Did You See Instead?\r\n\r\nProxy send request to NameServer\u3002\r\n\r\n### Additional Context\r\n\r\n_No response_"
}