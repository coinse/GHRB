{
  "issue_id": 6169,
  "issue_url": "https://github.com/apache/rocketmq/issues/6169",
  "title": "NPE found when timerWheel disabled",
  "description_text": "```\r\n2023-02-24 11:12:10 INFO PopReviveService_0 - reviveQueueId=0, old offset is -1\r\n2023-02-24 11:12:10 INFO PopReviveService_1 - reviveQueueId=1, old offset is -1\r\n2023-02-24 11:12:10 ERROR PopReviveService_2 - reviveQueueId=2, revive error\r\njava.lang.NullPointerException: null\r\n\tat org.apache.rocketmq.broker.processor.PopReviveService.consumeReviveMessage(PopReviveService.java:327)\r\n\tat org.apache.rocketmq.broker.processor.PopReviveService.run(PopReviveService.java:606)\r\n\tat java.lang.Thread.run(Thread.java:766)\r\n2023-02-24 11:12:10 ERROR PopReviveService_6 - reviveQueueId=6, revive error\r\njava.lang.NullPointerException: null\r\n\tat org.apache.rocketmq.broker.processor.PopReviveService.consumeReviveMessage(PopReviveService.java:327)\r\n\tat org.apache.rocketmq.broker.processor.PopReviveService.run(PopReviveService.java:606)\r\n\tat java.lang.Thread.run(Thread.java:766)\r\n2023-02-24 11:12:10 ERROR PopReviveService_4 - reviveQueueId=4, revive error\r\n```\r\n\r\nTimerMessageStore could be null when timerWheelEnable setting false.\r\n\r\nSince some processors are related with [timerWheelEnable], such as PopMessageProcessor, AckMessageProcessor, and only initialized once before startup, so can we check this switch and skip instantiation when disabled?"
}