{
  "issue_id": 4821,
  "issue_url": "https://github.com/apache/rocketmq/issues/4821",
  "title": "Add integration tests for POP consumption when slave is acting master",
  "description_text": "Slave acting master mode has been introduced in RIP-32, but there are few test cases to cover POP consumption mode when slave is acting master. It is necessary to add more test cases to guard this feature.\r\n\r\nI'd like to add integration tests to check the behavior of POP consumption in slave-acting-master mode.\r\n\r\nTest cases include:\r\n3 broker containers are set up, each with 1 master and 2 slaves. In every case, N messages are sent to `Container1-Master1`.\r\n\r\n|                   | consumed success (ACK)                                                   | reconsume later (non-ACK)                                                |\r\n|-------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|\r\n| escaping locally  | - N messages should be consumed. <br>- No more messages can be consumed. | - N messages should be consumed. <br>- N retry messages can be consumed. |\r\n| escaping remotely | - N messages should be consumed. <br>- No more messages can be consumed. | - N messages should be consumed. <br>- N retry messages can be consumed. |\r\n\r\n"
}