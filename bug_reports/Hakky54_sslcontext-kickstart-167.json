{
  "issue_id": 166,
  "issue_url": "https://github.com/Hakky54/sslcontext-kickstart/issues/166",
  "title": "the alias of CertificateEntry",
  "description_text": "**Describe the bug**\r\nHello, I am going to create an SSLContext with the following code, but the resulting SSLContext does not appear to be complete and its trustedCerts is empty.\r\n```\r\n    SSLFactory sslFactory = SSLFactory.builder()\r\n            .withTrustMaterial(CertificateUtils.loadCertificate(\"ca.crt\"))\r\n            .build();\r\n    SSLContext sslContext = sslFactory.getSslContext();\r\n```\r\n![image](https://user-images.githubusercontent.com/24501621/162576830-7d25ba46-3dd8-459b-87bf-71e9d088f063.png)\r\n\r\nthe content of ca.crt\r\n```\r\n-----BEGIN CERTIFICATE-----\r\nMIIFWTCCA0GgAwIBAgIUW4b6bPPPyRAm0DrDKKJJ8YlSqOkwDQYJKoZIhvcNAQEL\r\nBQAwPDE6MDgGA1UEAxMxRWxhc3RpY3NlYXJjaCBzZWN1cml0eSBhdXRvLWNvbmZp\r\nZ3VyYXRpb24gSFRUUCBDQTAeFw0yMjA0MDUxMjQ1MzVaFw0yNTA0MDQxMjQ1MzVa\r\nMDwxOjA4BgNVBAMTMUVsYXN0aWNzZWFyY2ggc2VjdXJpdHkgYXV0by1jb25maWd1\r\ncmF0aW9uIEhUVFAgQ0EwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDB\r\nq3aR//NaqXBUqI0AVHuVWJmFMLYwpi/DQLUYifwOlGx4iAb6ePuiA8b7tXAGPn0z\r\nTWFQ82t0DZf/1nXoRmNJO8ardAVWcL7z+VDUY7Hab08GJzRRP/V5b7VL+J+WBQOG\r\nauN0cal3jM14k3FeZApyoL+XqmJ36MSY3WtAPfF3ySH1ltcMguXqN79k3Bxw0mGq\r\nAJt+z4q8Lq2e8vsMKKpSO1vZ0grvffj6MBni2stfZ4ifA6Kubh/yePShKsG/N8nY\r\nK6iJYjwLuVUQ1Eaw6X3s78c+eESTlzZiM6I7qTR1JzW5Fuyz/ZPbDcI1zg+p9H4g\r\nNRaX76Fv9XG/XehLeYxNoTBLytY2d9kdEmW9MIGCqaROabDdxygxcJ5l3aqkBTiA\r\ntq42vguuiQvpLndfGIEA4qh5AFyo+iqP1226+1onHfeXtbtyqjpHIV6RZa8RqNLg\r\nynmf96NzzHQq1CfKp5CgQB/l3yaAtFxguNyhKftHia518iTjcUpn9f3gmSzDlZy2\r\nKgzZMaw8GwdtT+qac3XCVI7vwjY21uEHbCEklh8ZycAt28Dc0h747MqG9A3xdMDV\r\nlf8iBtGjuxQNJSsOBRY6Up8ajEWeYvEqpKDHVHYxc78qdjGCzltgGIvjzah389mH\r\nUC458l4Ey4Lns4C7NVAteHva9L71CE/zDTwJ3nECqwIDAQABo1MwUTAdBgNVHQ4E\r\nFgQUphpsq/WD1QUsRkr9EQaGinawo9owHwYDVR0jBBgwFoAUphpsq/WD1QUsRkr9\r\nEQaGinawo9owDwYDVR0TAQH/BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAgEAlg8X\r\nPnpSKIkt+a9imOFcddUgoNSCgwAyBuGdnUKTjuDnV2630O7cRky4Ly8gI3hxuV3j\r\nI0JHatPA4Xw8m/8rAkgoega4zCQ89L7w8g1b54NnvnMOQIKs4aQ7TsYQUgyGxj6j\r\nhhs1uLEBgF/uCJR1INZbiw4tjGTJssRSGMUsn7Mto0+3UL3AHqbmQY4IavRDEd2s\r\nzpyGN1acwh9jl50pcKjgM/UYhNgWvGQgOF7MP8+4BWXBn9O7ufdUt4n08yPFP5hn\r\nsOKrScnTCPIVn3uExcYDLDEuRDsQXfDvD03Bm6aFPC+qwr+W7k8WZPc7UW3vLzTg\r\nTPtvnFwTunD3Bzv14b+2BOQH+caOKVyjBn73HzXQ6Xp8KM6ef3+6RZTeomHhqAwr\r\nTG2vVsLzDhZiNjOE1Le3UeT4eAz7psgg+piouaXkY5FnVmMlNqWGkXfmvtMC8JzG\r\nuWGUtSV2plImhQMgfrF4wMhntiNQcHa0Fge0k4I4ajt/HD5Al4yMYCMzx7ocbZLg\r\nbTSDn+PuRt1NBZYC/Icz6L3CaSAVCMIEw145G/ytyu9annHs+hXSx+1ji3MHkF/g\r\nyE65FKuMXoHLhCdN9MoKFEDr6eLlY7l9HWbcfQGpePoX4L/g1nGMVQmssCChkH5r\r\nh5BvtLZEjAtAP6q1Al0phYV6eYQvLE8Dzbw0RQ0=\r\n-----END CERTIFICATE-----\r\n\r\n```\r\n**Environmental Data:**\r\n - Java Version 1.8.0_202\r\n - sslcontext-kickstart Version 7.3.0\r\n - OS: Windows\r\n\r\n**Additional context**\r\nI found out the cause of the problem, when create `X509TrustManagerImpl`, its trustedCerts is already empty.\r\n`sun.security.ssl.X509TrustManagerImpl`\r\n![image](https://user-images.githubusercontent.com/24501621/162578048-305fc97f-35df-478d-9435-5a862a44c77d.png)\r\n\r\n`sun.security.validator.KeyStores.getTrustedCerts(KeyStore var0)`\r\n![image](https://user-images.githubusercontent.com/24501621/162578133-bcf42382-d41c-4ce1-8e55-82ab47e4029f.png)\r\n\r\n`java.security.KeyStore.isCertificateEntry(String alias)`\r\n![image](https://user-images.githubusercontent.com/24501621/162578150-dee124a1-9604-4abe-adba-e99ea1e4e593.png)\r\n\r\n`sun.security.pkcs12.PKCS12KeyStore.engineIsCertificateEntry(String var1)`\r\nthe entries keys has the capital letters, but the parameter `var1` is lowercase letters\r\n![image](https://user-images.githubusercontent.com/24501621/162578285-e0fb121b-7e7d-4489-90cb-65824e5e2c92.png)\r\n\r\n\r\nCan you consider changing alias to lowercase in the `nl.altindag.ssl.util.KeyStoreUtils.createTrustStore(List<T> certificates)`\r\n![image](https://user-images.githubusercontent.com/24501621/162578511-a3e4cdd8-d670-4e57-a84e-dfe297d24178.png)\r\nor `nl.altindag.ssl.util.CertificateUtils.generateAlias(Certificate certificate)`\r\n![image](https://user-images.githubusercontent.com/24501621/162578648-63ef2dc9-59c5-4203-bdb0-791952a5eb06.png)\r\n\r\n\r\n\r\n\r\n\r\n"
}